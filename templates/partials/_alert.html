{% if messages %}
    <div class="alert-container">
        {% for message in messages %}
            <div class="custom-alert alert-dismissible fade show {% if message.tags == 'success' %}alert-success {% elif message.tags == 'error' %}alert-danger {% elif message.tags == 'warning' %}alert-warning {% elif message.tags == 'info' %}alert-info {% elif message.tags == 'debug' %}alert-secondary {% else %}alert-light{% endif %}"
                 role="alert">
                <span class="alert-text">{{ message }}</span>
                <button type="button"
                        class="btn-close btn-close-white"
                        data-bs-dismiss="alert"
                        aria-label="Close"></button>
            </div>
        {% endfor %}
    </div>
{% endif %}
<style>
/* Floating containers */
.alert-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1080; /* Higher than Bootstrap modal */
    display: flex;
    flex-direction: column;
    gap: 10px;
    pointer-events: none; /* Does not block the mouse */
}

/* Alert */
.custom-alert {
    min-width: 300px;
    max-width: 400px;
    padding: 12px 16px;
    border: none;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    animation: slideIn 0.3s ease-out;
    pointer-events: auto; /* Allow Close */
    opacity: 0;
    transform: translateX(100%);
}

.custom-alert.show {
    opacity: 1;
    transform: translateX(0);
}

/* Close button */
.custom-alert .btn-close {
    opacity: 0.8;
    filter: brightness(1.5);
}

.custom-alert .btn-close:hover {
    opacity: 1;
}

/* Text */
.alert-text {
    font-size: 0.95rem;
    font-weight: 500;
    flex: 1;
}

/* Animation */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes slideOut {
    to {
        opacity: 0;
        transform: translateX(100%);
    }
}

/* Phone optimization */
@media (max-width: 576px) {
    .alert-container {
        left: 20px;
        right: 20px;
    }
    .custom-alert {
        min-width: auto;
    }
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const alerts = document.querySelectorAll('.custom-alert');
    
    alerts.forEach((alert, index) => {
        // Delayed display
        setTimeout(() => {
            alert.classList.add('show');
        }, index * 100);

        // Automatically closes
        setTimeout(() => {
            alert.classList.remove('show');
            alert.addEventListener('transitionend', () => alert.remove());
        }, 5000 + index * 100);
    });

    // Supports Bootstrap close button
    alerts.forEach(alert => {
        const closeBtn = alert.querySelector('[data-bs-dismiss="alert"]');
        if (closeBtn) {
            closeBtn.addEventListener('click', () => {
                alert.classList.remove('show');
                alert.addEventListener('transitionend', () => alert.remove());
            });
        }
    });
});
</script>
