{% extends "base.html" %}
{% load static %}
{% load humanize %}
{% block body %}
    <div class="container">
        <div class="row">
            <div class="col-lg-11 col-xl-10 col-xxl-9 mx-auto">
                {% include "partials/_alert.html" %}
                <div class="d-flex btn-group" role="group">
                    <button type="button"
                            class="flex-fill btn btn-lg btn-light rounded-0 active"
                            data-target="#home"
                            aria-controls="home">Home</button>
                    <button type="button"
                            class="flex-fill btn btn-lg btn-light rounded-0"
                            data-target="#profile"
                            aria-controls="profile">Profile</button>
                    <button class="flex-fill btn btn-lg btn-light rounded-0"
                            type="button"
                            data-target="#orders"
                            aria-controls="orders">Orders</button>
                    <button class="flex-fill btn btn-lg btn-light rounded-0"
                            type="button"
                            data-target="#messages"
                            aria-controls="messages">Messages</button>
                </div>
                <div class="collapse show p-0" id="home">
                    <div class="h-50vh d-flex align-items-center justify-content-center bg-body-secondary">
                        <div class="text-center">
                            <h3 class="my-4">{{ user.username }}</h3>
                            <h3 class="my-4">Welcome Back</h3>
                        </div>
                    </div>
                    <form method="post" action="{% url 'member:sign_out' %}">
                        {% csrf_token %}
                        <button type="submit" class="w-100 btn btn-lg btn-dark rounded-0">Sing out</button>
                    </form>
                </div>
                <div class="collapse p-0" id="profile">
                    <div class="h-50vh bg-light p-3">
                        <table class="table table-md table-transparent border-white fw-normal mb-0">
                            <form id="profile" action="{% url 'member:profile' %}" method="post">
                                {% csrf_token %}
                                <tr>
                                    <th class="align-middle text-nowrap">
                                        <label for="user_name">Full Name</label>
                                    </th>
                                    <td class="p-1">
                                        <div class="input-group input-group-md">
                                            <input type="text"
                                                   id="user_name"
                                                   name="user_name"
                                                   class="form-control form-control-md"
                                                   placeholder="やまださん">
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th class="align-middle text-nowrap">
                                        <label for="user_email">Email Addresses</label>
                                    </th>
                                    <td class="p-1">
                                        <div class="input-group input-group-md">
                                            <input type="email"
                                                   id="user_email"
                                                   name="user_email"
                                                   class="form-control form-control-md"
                                                   placeholder="{{ user.email }}">
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th class="align-middle text-nowrap">
                                        <label for="user_phone">Phone Number</label>
                                    </th>
                                    <td class="p-1">
                                        <div class="input-group input-group-md">
                                            <input type="tel"
                                                   id="user_phone"
                                                   name="user_phone"
                                                   class="form-control form-control-md"
                                                   placeholder="002-1-816-860-8969">
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th class="align-middle text-nowrap">
                                        <label for="user_addresses">Delivery Addresses</label>
                                    </th>
                                    <td class="p-1">
                                        <div class="input-group input-group-md">
                                            <input type="text"
                                                   id="user_addresses"
                                                   name="user_addresses"
                                                   class="form-control form-control-md"
                                                   placeholder="Delivery Addresses">
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th class="align-middle text-nowrap">
                                        <label for="user_payment">Payment Info</label>
                                    </th>
                                    <td class="p-1">
                                        <div class="input-group input-group-md">
                                            <input type="text"
                                                   id="user_payment"
                                                   name="user_payment"
                                                   class="form-control form-control-md"
                                                   placeholder="Credit Card">
                                        </div>
                                    </td>
                                </tr>
                            </form>
                        </table>
                    </div>
                    <div class="col d-flex btn-group justify-content-between align-items-end"
                         role="group">
                        <button class="btn btn-md btn-info rounded-0 w-100"
                                type="button"
                                data-bs-toggle="collapse"
                                data-bs-target="#update_profile"
                                aria-controls="update_profile">Update Profile</button>
                        <button class="btn btn-md btn-danger rounded-0 w-100"
                                type="button"
                                data-bs-toggle="collapse"
                                data-bs-target="#change_password"
                                aria-controls="change_password">Change Password</button>
                    </div>
                    <div class="collapse show p-0" id="update_profile">
                        <form id="update_profile"
                              action="{% url 'member:update_profile' %}"
                              method="post">
                            {% csrf_token %}
                            <div class="form-floating my-3">
                                <input type="password"
                                       class="form-control"
                                       id="acc_password"
                                       name="acc_password"
                                       placeholder="Password"
                                       required>
                                <label for="acc_password">Password</label>
                            </div>
                        </form>
                        <button class="w-100 btn btn-md btn-dark rounded-0"
                                type="submit"
                                data-bs-target="#"
                                aria-controls="confirm">Confirm</button>
                    </div>
                    <div class="collapse show p-0" id="change_password">
                        <form id="change_password"
                              action="{% url 'member:change_password' %}"
                              method="post">
                            {% csrf_token %}
                            <div class="form-floating my-3">
                                <input type="password"
                                       class="form-control"
                                       id="acc_password"
                                       name="acc_password"
                                       placeholder="Password"
                                       required>
                                <label for="acc_password">Current Password</label>
                            </div>
                            <div class="form-floating my-3">
                                <input type="password"
                                       class="form-control"
                                       id="new_password"
                                       name="new_password"
                                       placeholder="Password"
                                       required>
                                <label for="new_password">New Password</label>
                            </div>
                            <div class="form-floating my-3">
                                <input type="password"
                                       class="form-control"
                                       id="re_enter_new_password"
                                       name="re_enter_new_password"
                                       placeholder="Password"
                                       required>
                                <label for="re_enter_new_password">Re-enter New Password</label>
                            </div>
                        </form>
                        <button class="w-100 btn btn-md btn-dark rounded-0"
                                type="submit"
                                data-bs-target="#"
                                aria-controls="confirm">Confirm</button>
                    </div>
                </div>
                <div class="collapse p-0" id="orders">
                    <div class="h-50vh">
                        <button class="w-100 btn btn-md btn-dark rounded-0"
                                type="button"
                                data-bs-toggle="collapse"
                                data-bs-target="#"
                                aria-controls="order1">Order1</button>
                    </div>
                </div>
                <div class="collapse p-0" id="messages">
                    <div class="h-50vh">
                        <button class="w-100 btn btn-md btn-dark rounded-0"
                                type="button"
                                data-bs-toggle="collapse"
                                data-bs-target="#"
                                aria-controls="message1">Messages1</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
document.querySelectorAll('.btn-group button').forEach(button => {
  button.addEventListener('click', function () {
    const targetId = this.getAttribute('data-target').substring(1);

    document.querySelectorAll('.btn-group button').forEach(btn => {
      btn.classList.remove('active');
    });
    this.classList.add('active');

    document.querySelectorAll('.collapse').forEach(el => {
      const collapse = bootstrap.Collapse.getInstance(el) || new bootstrap.Collapse(el, {toggle: false});
      if (el.id === targetId) {
        collapse.show();
      } else {
        collapse.hide();
      }
    });
  });
});
    </script>
{% endblock body %}
